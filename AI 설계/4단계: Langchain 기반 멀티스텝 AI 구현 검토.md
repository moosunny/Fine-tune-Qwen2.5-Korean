<h2>ğŸ¯Â ì‚¬ìš© ëª©ì </h2>

ê¸°ìˆ  | ì—­í•  | ìš”ì•½
-- | -- | --
LangChain | ê¸°ë³¸ ì¶”ë¡  ì²´ì¸ êµ¬ì„± | LLM ê¸°ë°˜ ì§ˆë¬¸/ë‹µë³€ ìƒì„± íë¦„ì„ ì •ì˜í•¨
Retrieval êµ¬ì¡° | ìœ ì‚¬ ì§ˆë¬¸ ê²€ìƒ‰ | ë²¡í„°DBë¥¼ í†µí•œ context ë³´ê°•ìš© ê²€ìƒ‰ ìˆ˜í–‰
LangGraph | ì¡°ê±´ ê¸°ë°˜ íë¦„ ì œì–´ | ë‚œì´ë„, í‚¤ì›Œë“œ í¬í•¨ ì—¬ë¶€ì— ë”°ë¼ ì²´ì¸ ë¶„ê¸°

---

<h2>ğŸ“ŒÂ LangChain ê¸°ë°˜ ì¶”ë¡  êµ¬ì¡°</h2>
<h3>âœ”ï¸ ì‚¬ìš© ì´ìœ </h3>
<ul>
<li>LLMì„ í†µí•œ í…ìŠ¤íŠ¸ ìƒì„± íë¦„ì„ í”„ë¡¬í”„íŠ¸ ë‹¨ìœ„ë¡œ ëª…í™•íˆ ë¶„ë¦¬í•˜ê³ , ì¬ì‚¬ìš© ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ êµ¬ì„± ê°€ëŠ¥</li>
<li>ì²´ì¸ ë‹¨ìœ„ë¡œ êµ¬ì„±í•˜ì—¬, ì§ˆë¬¸ ìƒì„±ê³¼ ë‹µë³€ ìƒì„±ì„ ê°ê° ë…ë¦½ì ìœ¼ë¡œ ì„¤ê³„í•  ìˆ˜ ìˆìŒ</li>
</ul>
<h3>âœ”ï¸êµ¬ì„± ì²´ì¸ ì¢…ë¥˜</h3>

ì²´ì¸ ìœ í˜• | ì‚¬ìš© ëª©ì  | ì„¤ëª…
-- | -- | --
LLMChain | ì§ˆë¬¸/ë‹µë³€ ìƒì„± | í”„ë¡¬í”„íŠ¸ ê¸°ë°˜ ì§ˆë¬¸ ìƒì„± / ë‹µë³€ ìƒì„±ì— ì‚¬ìš©
Retrievr | ìœ ì‚¬ ì§ˆë¬¸ ê²€ìƒ‰ | ë²¡í„°í™”ëœ TILì„ Qdrantì—ì„œ ìœ ì‚¬ ì§ˆë¬¸ ê²€ìƒ‰ì— í™œìš©


## ğŸ“ŒÂ ì²´ì¸ ì •ì˜ ì½”ë“œ ì˜ˆì‹œ

```python
# ì§ˆë¬¸ í”„ë¡¬í”„íŠ¸
question_prompt = PromptTemplate(
    input_variables=["til", "difficulty"],
    template="""
		ë„ˆëŠ” ê¸°ìˆ  ë©´ì ‘ê´€ì´ì•¼. ì•„ë˜ TILì„ ë°”íƒ•ìœ¼ë¡œ ë‚œì´ë„ {difficulty} ìˆ˜ì¤€ì˜ ë©´ì ‘ ì§ˆë¬¸ì„ ìƒì„±í•´ì¤˜.\nTIL:\n{til}\nì§ˆë¬¸:
		"""
)

# ë‹µë³€ í”„ë¡¬í”„íŠ¸
answer_prompt = PromptTemplate(
    input_variables=["question"],
    template="""
		ë‹¤ìŒ ì§ˆë¬¸ì— ëŒ€í•œ ê°„ë‹¨í•œ ëª¨ë²” ë‹µë³€ì„ ì‘ì„±í•´ì¤˜:\n{question}\në‹µë³€:
		"""
)

# ì²´ì¸ êµ¬ì„±
question_chain = LLMChain(llm=Mistral-7B, prompt=question_prompt)
answer_chain = LLMChain(llm=Mistral-7B, prompt=answer_prompt)

# ê²€ìƒ‰ê¸° êµ¬ì„± (Qdrant)
retriever = QdrantVectorStore(...).as_retriever()
results = retriever.similarity_search(til, k=3)
```

<h2>ğŸ“ŒÂ LangChain ë‚´ ì‚¬ìš© ë„êµ¬ ë° ì™¸ë¶€ ë¦¬ì†ŒìŠ¤</h2>

ë‹¨ê³„ | ì„¤ëª… | ì‚¬ìš© ë„êµ¬
-- | -- | --
TIL â†’ ì„ë² ë”© | BGE-m3 ê¸°ë°˜ ë²¡í„°í™” | OllamaEmbeddings + RunnableMap
ìœ ì‚¬ ì§ˆë¬¸ ê²€ìƒ‰ | Qdrantì—ì„œ top-k ê²€ìƒ‰ | QdrantVectorStore.as_retriever()
ì§ˆë¬¸ ìƒì„± | ìœ ì‚¬ ì§ˆë¬¸ ë° TIL ê¸°ë°˜ ìƒì„± | PromptTemplate + LLMChain
ë‹µë³€ ìƒì„± | ìƒì„±ëœ ì§ˆë¬¸ ê¸°ë°˜ ì‘ë‹µ | PromptTemplate + LLMChain
ì‘ë‹µ êµ¬ì„± | JSON êµ¬ì¡°í™” ë° ë³€í™˜ | RunnableMap or ì»¤ìŠ¤í…€ ì²˜ë¦¬


<blockquote>
<p>ë©´ì ‘ ì§ˆë¬¸ ë°ì´í„°ëŠ” GitHub, ë¸”ë¡œê·¸, ì˜¤í”ˆ ë°ì´í„°ì…‹ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ì „ ìˆ˜ì§‘ í›„ Qdrantì— ì €ì¥ë¨</p>
</blockquote>

<hr>

<h2>ğŸ§©Â LangGraph ë„ì… í•„ìš”ì„± ë° ì‹¤ì œ ì ìš© ë°©ì‹</h2>
<p>ğŸ¯Â ë¬¸ì œ ìƒí™©</p>

ì‹œë‚˜ë¦¬ì˜¤ | ë¬¸ì œì 
-- | --
ìœ ì‚¬ ì§ˆë¬¸ì´ ì—†ëŠ” ê²½ìš° | SequentialChainì€ ì¡°ê±´ ë¶„ê¸°ê°€ ì–´ë ¤ì›Œ fallback ì²˜ë¦¬ê°€ ë¶ˆê°€ëŠ¥
ì¡°ê±´ë³„ í”„ë¡¬í”„íŠ¸ ì‚¬ìš© | LLMChainë§Œìœ¼ë¡œëŠ” ì¡°ê±´ ë¶„ê¸°ë¥¼ ì½”ë“œ ì™¸ë¶€ì—ì„œ ì²˜ë¦¬í•´ì•¼ í•¨
ê¸°ìˆ  í‚¤ì›Œë“œ í¬í•¨ ì‹œ ë¶„ê¸° | ì „ìš© ì²´ì¸ì„ êµ¬ì„±í•˜ê¸° ì–´ë µê³  ë¡œì§ì´ ë¶„ì‚°ë¨

<p>ğŸ¯Â LangGraphë¥¼ í†µí•œ í•´ê²°</p>

LangGraph ê¸°ëŠ¥ | ë„ì… ì´ìœ 
-- | --
StateGraph | ìœ ì‚¬ ì§ˆë¬¸ì´ ì—†ì–´ ê²€ìƒ‰ ì‹¤íŒ¨ ì‹œ fallback ë¶„ê¸° ì²˜ë¦¬
DAG ê¸°ë°˜ ì„¤ê³„ | ì§ˆë¬¸ ìƒì„± â†’ ë‹µë³€ ìƒì„± â†’ ìš”ì•½ ë“± ë‹¤ë‹¨ê³„ ì¶”ë¡  í‘œí˜„ ê°€ëŠ¥
ì¡°ê±´ ë…¸ë“œ (e.g. add_conditional_edges()) | ì§ˆë¬¸ ë‚œì´ë„/ìœ ì‚¬ë„/í‚¤ì›Œë“œ ì¡°ê±´ ë³„ í”„ë¡¬í”„íŠ¸ ë¶„ê¸° ëª…ì‹œí™”


## ğŸ§©Â LangGraph íë¦„ ì˜ˆì‹œ ì½”ë“œ

```python
from langgraph.graph import StateGraph

graph = StateGraph()

# ë…¸ë“œ ì„ ì–¸
graph.add_node("embedding", run_embedding) # TIL ë²¡í„°í™”
graph.add_node("search", search_qdrant) # ìœ ì‚¬ ì§ˆë¬¸ ê²€ìƒ‰
graph.add_node("route", route_by_score) # ìœ ì‚¬ë„ ì ìˆ˜ë‚˜ ì¡°ê±´ì— ë”°ë¼ íë¦„ íŒë‹¨
graph.add_node("fallback_generation", fallback_chain) # ìœ ì‚¬ ì§ˆë¬¸ì´ ì—†ì„ ê²½ìš° ëŒ€ì²´ ì²´ì¸
graph.add_node("contextual_generation", contextual_chain) # ìœ ì‚¬ ì§ˆë¬¸ ìˆì„ ê²½ìš° ì²´ì¸
graph.add_node("answer_generation", answer_chain) # ë‹µë³€ ìƒì„± ì²´ì¸
graph.add_node("format", format_output) # ì‘ë‹µ í¬ë©§

# ì¡°ê±´ ë¶„ê¸°
graph.add_conditional_edges("route", {
    "contextual_generation": "contextual_generation",
    "fallback_generation": "fallback_generation"
})

# ê¸°ë³¸ ì—°ê²°
graph.set_entry_point("embedding")
graph.add_edge("embedding", "search")
graph.add_edge("search", "route")
# ìœ ì‚¬ì§ˆë¬¸ì´ ìˆë“  ì—†ë“  ì§ˆë¬¸ ìƒì„±ì´ ëë‚˜ë©´ ë‹µë³€ ìƒì„±ìœ¼ë¡œ ë„˜ì–´ê°
graph.add_edge("contextual_generation", "answer_generation")
graph.add_edge("fallback_generation", "answer_generation")
graph.add_edge("answer_generation", "format")
```


## ğŸ§© LangGraphë¥¼ í™œìš©í•œ ì¡°ê±´ ë¶„ê¸° êµ¬ì¡°

### 1. ë‚œì´ë„ == 'ìƒ' â†’ ê³ ë‚œì´ë„ ì§ˆë¬¸ ì²´ì¸ ë¶„ê¸°

ì‚¬ìš©ìì˜ TILê³¼ í•¨ê»˜ ì…ë ¥ëœ ë‚œì´ë„ê°€ 'ìƒ'ì¼ ê²½ìš°,

â†’ ê¸°ë³¸ ì²´ì¸ê³¼ëŠ” ë³„ë„ë¡œ ê³ ë‚œì´ë„ ì „ìš© í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì§ˆë¬¸ ìƒì„± ì²´ì¸ìœ¼ë¡œ ë¶„ê¸°ë¨.

```python
def route_by_difficulty(state):
    difficulty = state["difficulty"]
    
    if difficulty == "ìƒ":
        return "advanced_generation"
    elif difficulty == "ì¤‘":
        return "intermediate_generation"
    else:
        return "basic_generation"
```

### 2. ìœ ì‚¬ ì§ˆë¬¸ ê²€ìƒ‰ ì‹¤íŒ¨ â†’ `fallback` ë¶„ê¸° í•„ìš”

ì‚¬ìš©ìì˜ TILì„ ë²¡í„°í™”í•˜ê³  Qdrantì— top-k ìœ ì‚¬ë„ ê²€ìƒ‰ì„ ìš”ì²­í–ˆì„ ë•Œ, ë‹¤ì–‘í•œ ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆìŒ:

- ê²€ìƒ‰ëœ ìœ ì‚¬ ì§ˆë¬¸ ìˆ˜ê°€ 0ê°œ
- ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆë”ë¼ë„ ìœ ì‚¬ë„ê°€ 0.75 ë¯¸ë§Œìœ¼ë¡œ ë‚®ìŒ

ì´ëŸ¬í•œ ê²½ìš°ì—ëŠ” ê²€ìƒ‰ëœ ì§ˆë¬¸ì„ ê¸°ë°˜ìœ¼ë¡œ ì§ˆë¬¸ì„ ìƒì„±í•˜ë©´ ì •í™•ë„ê°€ ë–¨ì–´ì§€ê¸° ë•Œë¬¸ì—

â†’ ë²¡í„° ê²€ìƒ‰ì„ ìƒëµí•˜ê³  TIL ì›ë¬¸ë§Œìœ¼ë¡œ ì§ˆë¬¸ì„ ìƒì„±í•˜ëŠ” fallback ì²´ì¸ìœ¼ë¡œ ë¶„ê¸°í•¨.

```python
def route_by_search_result(state):
    results = state["search_results"]
    max_score = max([r.score for r in results]) if results else 0
    
    if len(results) == 0 or max_score < 0.75:
        return "fallback_generation"
    else:
        return "contextual_generation"
```

### 3. íŠ¹ì • ê¸°ìˆ  í‚¤ì›Œë“œ í¬í•¨ ì‹œ â†’ ê¸°ìˆ  ì „ìš© í”„ë¡¬í”„íŠ¸ ì²´ì¸ ë¶„ê¸°

ì‚¬ìš©ìì˜ TIL ë‚´ì— ì‚¬ì „ì— ì •ì˜ëœ ê¸°ìˆ  í‚¤ì›Œë“œ ë¦¬ìŠ¤íŠ¸ ì¤‘ í•˜ë‚˜ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤ë©´

â†’ ì¼ë°˜ì ì¸ ì§ˆë¬¸ ì²´ì¸ì´ ì•„ë‹ˆë¼, ê¸°ìˆ  íŠ¹í™” í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë³„ë„ ì²´ì¸ìœ¼ë¡œ ë¶„ê¸°.

```python
def route_by_keywords(state):
    til_text = state["til"]
    tech_keywords = ["Docker", "JWT", "TensorFlow", "PyTorch", "Kubernetes"]
    
    if any(keyword.lower() in til_text.lower() for keyword in tech_keywords):
        return "tech_specialized_generation"
    else:
        return "general_generation"
```

<h3>ë¶„ê¸° êµ¬ì¡° ìš”ì•½í‘œ</h3>

ì¡°ê±´ | ì²˜ë¦¬ ë°©ì‹
-- | --
ë‚œì´ë„ == 'ìƒ' | â†’ ê³ ë‚œì´ë„ ì§ˆë¬¸ ì „ìš© ì²´ì¸ìœ¼ë¡œ ë¶„ê¸° (í”„ë¡¬í”„íŠ¸ ë° ê¸°ëŒ€ ì‘ë‹µ ë‹¬ë¼ì§)
Qdrant ìœ ì‚¬ ì§ˆë¬¸ ì—†ìŒ ë˜ëŠ” ìœ ì‚¬ë„ < 0.75 | â†’ fallback ì²´ì¸ (ê²€ìƒ‰ ì—†ì´ TILë§Œ ê¸°ë°˜ìœ¼ë¡œ ì§ˆë¬¸ ìƒì„±)
TIL ë‚´ íŠ¹ì • í‚¤ì›Œë“œ í¬í•¨ | â†’ ê¸°ìˆ  ì „ìš© ì§ˆë¬¸ í”„ë¡¬í”„íŠ¸ ì²´ì¸ìœ¼ë¡œ ë¶„ê¸°


---


## ğŸ“ŒÂ ì „ì²´ AI ì¶”ë¡  íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ì ì…ë ¥ ìˆ˜ì‹                  â”‚ TIL, ë‚ ì§œ, ë‚œì´ë„
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TIL ì „ì²˜ë¦¬ ë° ë²¡í„° ì„ë² ë”© ìƒì„±    â”‚ â† LangChain Runnable
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Qdrant ë²¡í„°DBì—ì„œ ìœ ì‚¬ ì§ˆë¬¸ ê²€ìƒ‰  â”‚ â† Retriever
â”‚ - Top-k ê´€ë ¨ ì§ˆë¬¸ ë°˜í™˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê²€ìƒ‰ ê²°ê³¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸         â”‚ â† LangGraph
â”‚ - ê´€ë ¨ ì§ˆë¬¸ì´ ì—†ìœ¼ë©´ Fallback   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚             â”‚
      â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìœ ì‚¬ ì§ˆë¬¸ ìˆìŒ  â”‚  â”‚ ìœ ì‚¬ ì§ˆë¬¸ ì—†ìŒ (Fallback) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë©´ì ‘ ì§ˆë¬¸ ìƒì„± (LLM + í”„ë¡¬í”„íŠ¸)        â”‚ â† LangChain LLMChain
â”‚  - ë‚œì´ë„ ê¸°ë°˜ ë¶„ê¸°                  â”‚
â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚          â”‚            â”‚
  â–¼          â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê¸°ë³¸    â”‚ â”‚ ì¤‘ê¸‰    â”‚ â”‚ ê³ ê¸‰    â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚          â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼            
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ì§ˆë¬¸ ê¸°ë°˜ ë‹µë³€ ìƒì„±         â”‚ â† LangChain LLMChain
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‘ë‹µ í¬ë§· êµ¬ì„± ë° ë°˜í™˜                â”‚
â”‚  - {difficulty, question, answer}â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```



